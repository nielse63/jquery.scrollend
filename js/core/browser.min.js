!function(a){if("function"==typeof define&&define.amd&&define("clique-browser",["clique"],function(){return a(Clique)}),!window.Clique)throw new Error("Clique.browser requires Clique.core");window.Clique&&a(Clique)}(function(a){var b=a.$;a.browser={engine:"",major:"",minor:"",name:"",patch:"",version:"",supports:function(b){var c=a.$doc[0].body||a.$doc[0].documentElement,d="Khtml Ms ms O Moz Webkit".split(" "),e=c.style;if(!a.utils.isUndefined(e[b]))return!0;b=b.replace(/^[a-z]/,function(a){return a.toUpperCase()});for(var f=0;f<d.length;f++){var g=d[f];if(!a.utils.isUndefined(e[g+b]))return!0}return!1}},a.component("browserProxy",{defaults:{addClasses:!0,detectDevice:!0,detectScreen:!0,detectOS:!0,detectBrowser:!0,detectLanguage:!0,detectPlugins:!0,detectSupport:["flex","animation"]},device:{type:"",model:"",orientation:""},screen:{size:"",touch:!1},deviceTypes:["tv","tablet","mobile","desktop"],screens:{mini:0,small:480,medium:768,large:960,xlarge:1220},browserLanguage:{direction:"",code:""},boot:function(){return a.ready(function(){var b=a.$doc;b.data("clique.data.browserProxy")||a.browserProxy(b)})},init:function(){return this.getProperties(),a.$win.on("resize orientationchange",a.utils.debounce(function(a){return function(){return a.getProperties()}}(this),250))},getProperties:function(){var b=a.$win[0];this.userAgent=(b.navigator.userAgent||b.navigator.vendor||b.opera).toLowerCase(),this.options.detectDevice&&this.detectDevice(),this.options.detectScreen&&this.detectScreen(),this.options.detectOS&&this.detectOS(),this.options.detectBrowser&&this.detectBrowser(),this.options.detectPlugins&&this.detectPlugins(),this.options.detectLanguage&&this.detectLanguage(),this.options.detectSupport&&this.detectSupport(),this.options.addClasses&&this.addClasses(),setTimeout(function(a){return function(){a.trigger("updated.browser.clique")}}(this),0)},test:function(a){return a.test(this.userAgent)},exec:function(a){return a.exec(this.userAgent)},uamatches:function(a){return this.userAgent.indexOf(a)>-1},version:function(a,b){a.version=b;var c=b.split(".");c.length>0?(c=c.reverse(),a.major=c.pop(),c.length>0?(a.minor=c.pop(),c.length>0?(c=c.reverse(),a.patch=c.join(".")):a.patch="0"):a.minor="0"):a.major="0"},detectDevice:function(){var b=this.device;if(this.test(/googletv|smarttv|smart-tv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|roku|pov_tv|hbbtv|ce\-html/)?(b.type=this.deviceTypes[0],b.model="smarttv"):this.test(/xbox|playstation.3|wii/)?(b.type=this.deviceTypes[0],b.model="console"):this.test(/ip(a|ro)d/)?(b.type=this.deviceTypes[1],b.model="ipad"):this.test(/tablet/)&&!this.test(/rx-34/)||this.test(/folio/)?(b.type=this.deviceTypes[1],b.model=String(this.exec(/playbook/)||"")):this.test(/linux/)&&this.test(/android/)&&!this.test(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/)?(b.type=this.deviceTypes[1],b.model="android"):this.test(/kindle/)||this.test(/mac.os/)&&this.test(/silk/)?(b.type=this.deviceTypes[1],b.model="kindle"):this.test(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/)||this.test(/mb511/)&&this.test(/rutem/)?(b.type=this.deviceTypes[1],b.model="android"):this.test(/bb10/)?(b.type=this.deviceTypes[1],b.model="blackberry"):(b.model=this.exec(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/),null!==b.model?(b.type=this.deviceTypes[2],b.model=String(b.model)):(b.model="",this.test(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/)?b.type=this.deviceTypes[2]:this.test(/opera/)&&this.test(/windows.nt.5/)&&this.test(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/)?b.type=this.deviceTypes[2]:this.test(/windows.(nt|xp|me|9)/)&&!this.test(/phone/)||this.test(/win(9|.9|nt)/)||this.test(/\(windows 8\)/)?b.type=this.deviceTypes[3]:this.test(/macintosh|powerpc/)&&!this.test(/silk/)?(b.type=this.deviceTypes[3],b.model="mac"):this.test(/linux/)&&this.test(/x11/)?b.type=this.deviceTypes[3]:this.test(/solaris|sunos|bsd/)?b.type=this.deviceTypes[3]:this.test(/cros/)?b.type=this.deviceTypes[3]:this.test(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/)&&!this.test(/mobile/)?(b.type=this.deviceTypes[3],b.model="crawler"):b.type=this.deviceTypes[3])),"desktop"!==b.type&&"tv"!==b.type){var c=a.$win.outerWidth(),d=a.$win.outerHeight();b.orientation="landscape",d>c&&(b.orientation="portrait")}this.device=b},detectScreen:function(){var b=a.$win.width();for(var c in this.screens){var d=this.screens[c];b>d-1&&(this.screen.size=c)}this.detectTouch()},detectTouch:function(){var b=a.$win[0],c=a.$doc[0],d="ontouchstart"in b&&b.navigator.userAgent.toLowerCase().match(/mobile|tablet/)||b.DocumentTouch&&c instanceof b.DocumentTouch||b.navigator.msPointerEnabled&&b.navigator.msMaxTouchPoints>0||b.navigator.pointerEnabled&&b.navigator.maxTouchPoints>0||!1;this.screen.touch=!!d},detectOS:function(){var a=this.device,b={};""!==a.model&&("ipad"===a.model||"iphone"===a.model||"ipod"===a.model?(b.name="ios",this.version(b,(this.test(/os\s([\d_]+)/)?RegExp.$1:"").replace(/_/g,"."))):"android"===a.model?(b.name="android",this.version(b,this.test(/android\s([\d\.]+)/)?RegExp.$1:"")):"blackberry"===a.model?(b.name="blackberry",this.version(b,this.test(/version\/([^\s]+)/)?RegExp.$1:"")):"playbook"===a.model&&(b.name="blackberry",this.version(b,this.test(/os ([^\s]+)/)?RegExp.$1.replace(";",""):""))),b.name||(this.uamatches("win")||this.uamatches("16bit")?(b.name="windows",this.uamatches("windows nt 6.3")?this.version(b,"8.1"):this.uamatches("windows nt 6.2")||this.test(/\(windows 8\)/)?this.version(b,"8"):this.uamatches("windows nt 6.1")?this.version(b,"7"):this.uamatches("windows nt 6.0")?this.version(b,"vista"):this.uamatches("windows nt 5.2")||this.uamatches("windows nt 5.1")||this.uamatches("windows xp")?this.version(b,"xp"):this.uamatches("windows nt 5.0")||this.uamatches("windows 2000")?this.version(b,"2k"):this.uamatches("winnt")||this.uamatches("windows nt")?this.version(b,"nt"):this.uamatches("win98")||this.uamatches("windows 98")?this.version(b,"98"):(this.uamatches("win95")||this.uamatches("windows 95"))&&this.version(b,"95")):this.uamatches("mac")||this.uamatches("darwin")?(b.name="mac os",this.uamatches("68k")||this.uamatches("68000")?this.version(b,"68k"):this.uamatches("ppc")||this.uamatches("powerpc")?this.version(b,"ppc"):this.uamatches("os x")&&this.version(b,(this.test(/os\sx\s([\d_]+)/)?RegExp.$1:"os x").replace(/_/g,"."))):this.uamatches("webtv")?b.name="webtv":this.uamatches("x11")||this.uamatches("inux")?b.name="linux":this.uamatches("sunos")?b.name="sun":this.uamatches("irix")?b.name="irix":this.uamatches("freebsd")?b.name="freebsd":this.uamatches("bsd")&&(b.name="bsd")),this.test(/\sx64|\sx86|\swin64|\swow64|\samd64/)?b.addressRegisterSize="64bit":b.addressRegisterSize="32bit",this.operatingSystem=b},detectBrowser:function(){var b={};this.test(/opera|webtv/)||!this.test(/msie\s([\d\w\.]+)/)&&!this.uamatches("trident")?this.uamatches("firefox")?(b.engine="gecko",b.name="firefox",this.version(b,this.test(/firefox\/([\d\w\.]+)/)?RegExp.$1:"")):this.uamatches("gecko/")?b.engine="gecko":this.uamatches("opera")||this.uamatches("opr")?(b.name="opera",b.engine="presto",this.version(b,this.test(/version\/([\d\.]+)/)?RegExp.$1:this.test(/opera(\s|\/)([\d\.]+)/)?RegExp.$2:"")):this.uamatches("konqueror")?b.name="konqueror":this.uamatches("chrome")?(b.engine="webkit",b.name="chrome",this.version(b,this.test(/chrome\/([\d\.]+)/)?RegExp.$1:"")):this.uamatches("iron")?(b.engine="webkit",b.name="iron"):this.uamatches("crios")?(b.name="chrome",b.engine="webkit",this.version(b,this.test(/crios\/([\d\.]+)/)?RegExp.$1:"")):this.uamatches("applewebkit/")?(b.name="safari",b.engine="webkit",this.version(b,this.test(/version\/([\d\.]+)/)?RegExp.$1:"")):this.uamatches("mozilla/")&&(b.engine="gecko"):(b.engine="trident",b.name="ie",!window.addEventListener&&document.documentMode&&7===document.documentMode?this.version(b,"8.compat"):this.test(/trident.*rv[ :](\d+)\./)?this.version(b,RegExp.$1):this.version(b,this.test(/trident\/4\.0/)?"8":RegExp.$1)),a.browser=a.$.extend({},a.browser,b)},detectLanguage:function(){var b=a.$body[0],c=a.$win[0];this.browserLanguage.direction=c.getComputedStyle(b).direction||"ltr",this.browserLanguage.code=c.navigator.userLanguage||c.navigator.language},detectPlugins:function(){if(this.plugins=[],"undefined"!=typeof window.navigator.plugins){for(var a=window.navigator.plugins,b=[],c=0,d=a.length;d>c;c++){var e=a[c];b.push(this.plugins.push(e.name))}return b}},detectSupport:function(){var b=function(){var b=a.$doc[0].createElement("div"),c="Khtml Ms ms O Moz Webkit".split(" ");return function(a){if("undefined"!=typeof b.style[a])return!0;a=a.replace(/^[a-z]/,function(a){return a.toUpperCase()});for(var d=0,e=c.length;e>d;d++){var f=c[d];if("undefined"!=typeof b.style[f+a])return!0}return!1}}();this.css||(this.css={});for(var c=this.options.detectSupport,d=0,e=c.length;e>d;d++){var f=c[d];return void(this.css[f]=b(f))}},addClasses:function(){if(this.removeClasses(),a.browser.name){var b=a.browser.name;"ie"===b&&(b+=" ie"+a.browser.major),this.classes.push(b),a.$html.addClass(b)}if(this.device.type){var c=this.device.type;this.classes.push(c),a.$html.addClass(c)}if(this.device.model){var d=this.device.model;this.classes.push(d),a.$html.addClass(d)}if(this.device.orientation){var e=this.device.orientation;this.classes.push(e),a.$html.addClass(e)}if(this.screen.size){var f="screen-"+this.screen.size;this.classes.push(f),a.$html.addClass(f)}var g=this.css;for(var h in g){var i=g[h];if(!i){var j="no"+h;this.classes.push(j),a.$html.addClass(j)}}var k=this.screen.touch?"touch":"notouch";return this.classes.push(k),a.$html.addClass(k),this.browserLanguage.direction&&a.$html.attr("dir",this.browserLanguage.direction),this.browserLanguage.code?a.$html.attr("lang",this.browserLanguage.code):void 0},removeClasses:function(){this.classes||(this.classes=[]),b.each(this.classes,function(b,c){return a.$html.removeClass(c)}),this.classes=[]}})});